# ----------------------------------------------
# CauseConnect GraphQL Schema
# ----------------------------------------------

# -------------------------
# Types
# -------------------------

type User {
  id: ID!
  full_name: String!
  email: String!
  password: String
  role: String!
  profile_picture: String
  created_at: String
  donations: [Donation]
  favorites: [Favorite]
  ngos: [NGO]
  notifications: [Notification]
  volunteer_events: [EventVolunteer]
}

type NGO {
  id: ID!
  name: String!
  cause: String
  description: String
  location: String
  contact_info: String
  donation_link: String
  ngo_picture: String
  created_by: ID!
  created_at: String
  events: [Event]
  donations: [Donation]
  favorites: [Favorite]
}

type Event {
  id: ID!
  title: String!
  description: String
  event_date: String
  location: String
  volunteers_needed: Int
  ngo_id: ID!
  ngo: NGO
  volunteers: [EventVolunteer]
  created_at: String
}

type Donation {
  id: ID!
  amount: Float!
  message: String
  user_id: ID!
  ngo_id: ID!
  user: User
  ngo: NGO
  created_at: String
}

type Favorite {
  id: ID!
  user_id: ID!
  ngo_id: ID!
  user: User
  ngo: NGO
}

type Notification {
  id: ID!
  message: String!
  user_id: ID!
  user: User
  cause_id: ID
  created_at: String
}

type EventVolunteer {
  id: ID!
  user_id: ID!
  event_id: ID!
  registered_at: String
  event: Event
  user: User
}

# -------------------------
# Auth Type
# -------------------------

type AuthPayload {
  token: String!
  user: User!
}

# -------------------------
# Queries
# -------------------------

type Query {
  # General
  ngos: [NGO]
  ngo(id: ID!): NGO
  events: [Event]
  users: [User]
  user(id: ID!): User

  # Logged-in user
  userDonations: [Donation]
  userFavorites: [Favorite]
  userNotifications: [Notification]

  # Organizer-specific
  organizerNGOs: [NGO]
  organizerEvents: [Event]
  organizerDonations: [Donation]
  organizerVolunteers: [EventVolunteer]
}

# -------------------------
# Mutations
# -------------------------

type Mutation {
  # Authentication
  signUpUser(
    email: String!
    full_name: String!
    password: String!
    profile_picture: String
    role: String!
  ): AuthPayload

  loginUser(email: String!, password: String!): AuthPayload

  # NGO
  createNGO(
    name: String!
    cause: String
    description: String
    location: String
    contact_info: String
    donation_link: String
    ngo_picture: String
  ): NGO

  updateNGO(
    id: ID!
    name: String
    cause: String
    description: String
    location: String
    contact_info: String
    donation_link: String
    ngo_picture: String
  ): NGO

  deleteNGO(id: ID!): NGO

  # Events
  createEvent(
    ngo_id: ID!
    title: String!
    description: String
    event_date: String
    location: String
    volunteers_needed: Int
  ): Event

  deleteEvent(id: ID!): Event

  # Donations
  donateToNGO(ngo_id: ID!, amount: Float!, message: String): Donation

  # Favorites
  addFavorite(ngo_id: ID!): Favorite
  removeFavorite(ngo_id: ID!): String

  # Volunteers
  registerVolunteer(event_id: ID!): EventVolunteer
  removeVolunteer(event_id: ID!, user_id: ID!): String

  # Notifications
  createNotification(message: String!, cause_id: ID): Notification

  # User
  updateUser(id: ID!, full_name: String, profile_picture: String): User
  deleteUser(id: ID!): User
}
